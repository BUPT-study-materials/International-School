<html>
<head>
  <title>CH3 Process Concept</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602326 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="836"/>
<h1>CH3 Process Concept</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2020/12/17 9:54</i></td></tr>
<tr><td><b>作者：</b></td><td><i>dmadkr1217</i></td></tr>
</table>
</div>
<br/>

<div><span><h1>CH3 Process Concept</h1><div style="padding-left:40px;"><b>-An operating system executes a variety of programs</b></div><div style="padding-left:80px;">Batch- jobs/process</div><div style="padding-left:80px;">Time-shared systems - user programs or tasks</div><div style="padding-left:40px;">-<b>Process 定义</b></div><div style="padding-left:80px;">a program in execution, which forms the basis of all execution;</div><div style="padding-left:80px;">process execution must progress in sequantial fashion</div><div style="padding-left:40px;"><b>-Multiple parts</b></div><div style="padding-left:80px;"><b>文本段：</b> The program code -&gt;<b> text section</b></div><div style="padding-left:80px;"><b>程序计数器：</b> Current activity including<b> program counter,</b> processor registers</div><div style="padding-left:80px;"><b>栈：Stack</b> containing <b>temporary data</b></div><div style="padding-left:120px;">Function parameters, return addresses, local variables</div><div style="padding-left:80px;"><b>数据段：Date section</b> containing <b>global variables</b></div><div style="padding-left:80px;"><b>堆：Heap</b> containing <b>memory dynamically allocated</b> during run time</div><div style="padding-left:40px;">-Program is <b>passive</b> entity on disk,process is <b>active</b></div><div style="padding-left:80px;"><b>program becomes process when executable file loaded into memory</b></div><div style="padding-left:40px;">-Execution of program started via mouse clicks, CML entry or its name</div><div style="padding-left:40px;">-One program can be several processes</div><div style="padding-left:80px;">multiple users executing the same program</div><div style="padding-left:40px;"><b>-Process in Momory</b></div><div style="padding-left:80px;">MAX Stack 向下申请</div><div><br/></div><div style="padding-left:80px;">Allocating space</div><div><br/></div><div style="padding-left:80px;">Heap 向上申请</div><div style="padding-left:80px;">data</div><div style="padding-left:80px;">0    text</div><div style="padding-left:40px;"><b>-Process State</b></div><div style="padding-left:80px;">As a process executes, it changes<b> state</b></div><div style="padding-left:120px;"><b>new: The process being created</b></div><div style="padding-left:120px;"><b>running: Instructions are being executed</b></div><div style="padding-left:120px;"><b>waiting: The process is waiting for some event to occur</b></div><div style="padding-left:120px;"><b>ready:The process is waiting to be assigned to a processor</b></div><div style="padding-left:120px;"><b>terminated:Finishing execution</b></div><div style="padding-left:80px;">-Diagrams of Progress State</div><img src="CH3 Process Concept_files/Image.png" type="image/png" data-filename="Image.png"/><div style="padding-left:40px;"><b>-Process control Block(PCB)</b></div><div style="padding-left:40px;">Information associated with each process/task control block</div><div style="padding-left:80px;">Process state- running,waiting,...</div><div style="padding-left:80px;">Program counter    -<b>location of instruction to next execute</b></div><div style="padding-left:80px;">CPU registers    -<b>contents of all processcentric registers</b></div><div style="padding-left:80px;">CPU sheduling information    -<b>priorities,scheduling queue pointers</b></div><div style="padding-left:80px;">Memory    -management information <b>-memory allocated to process</b></div><div style="padding-left:80px;">Accounting information    -CPU used, clock time elapsed since start, time limits</div><div style="padding-left:80px;">I/O status information -I/O devices allocated to process, list of open files</div><div style="padding-left:40px;">-CPU switch From Process to Process</div><img src="CH3 Process Concept_files/A1.png" type="image/png" data-filename="A1.png"/><div style="padding-left:40px;"><b>-Threads</b></div><div style="padding-left:80px;">multiple program counters per process</div><div style="padding-left:120px;"><b>Multiple locations can execute at once</b></div><div style="padding-left:160px;">-Multiple threads of control：<b>threads</b></div><div style="padding-left:80px;">Storage for thread details,multiple program counters in PCB</div><div style="padding-left:40px;"><b>-Process in Linux</b></div><div style="padding-left:80px;"> 双向链表</div><div style="padding-left:40px;"><b>-Process Scheduling</b></div><div style="padding-left:80px;">Maximum CPU use, quickly switch processed onto CPU for time shareing</div><div style="padding-left:80px;"><b>Process scheduler</b> selects among available process for next execution on CPU</div><div style="padding-left:80px;">Maintains <b>scheduling queue</b>s of process</div><div style="padding-left:120px;"><b>Job queue </b>   -set of all processes in the system</div><div style="padding-left:120px;"><b>Ready queue</b>    -set of all process residing in main memory, ready and waiting to execute</div><div style="padding-left:120px;"><b>Device queues </b>   -set of process waiting for an I/O device processes migrate among the various queues</div><div style="padding-left:120px;">Process migrate among the queues</div><div style="padding-left:40px;"><b>-Process sheduling</b></div><img src="CH3 Process Concept_files/A2.png" type="image/png" data-filename="A2.png"/><div style="padding-left:40px;"><b>-Schedulers</b></div><div style="padding-left:80px;"><b>1.Short-term scheculer(cpu scheduler)</b>   </div><div style="padding-left:120px;"> select which process should be executed next and allocates CPU</div><div style="padding-left:160px;">-sometimes the only scheduler in a system</div><div style="padding-left:160px;">-invoked frequently(miliseconds), mast be fast</div><div style="padding-left:80px;"><b>2.Long-term scheduler(job scheduler)</b></div><div style="padding-left:120px;">selects which process should be brought into ready queue</div><div style="padding-left:160px;">-invoked infrequently(seconds, minutes) , may be slow</div><div style="padding-left:160px;">-controls the <b>degree of multiprogramming</b></div><div style="padding-left:80px;">Processes can be describes as :</div><div style="padding-left:120px;">1.I/O-bound process    -spend more time doing I/O than computations</div><div style="padding-left:120px;">2.CPU-bound process -more computaations</div><div style="padding-left:80px;">Long-term scheduler strives for good process mix of I/O and cpu bound process,</div><div style="padding-left:120px;">The CPU with brst performance will thus have s combination of CPU and I/O bound process</div><div style="padding-left:40px;">-<b>Addition of Medium Term Scheduling</b></div><div style="padding-left:80px;"><b>Medium Term Scheduler</b> can be added if degree of multiprogramming needs to decrease</div><div style="padding-left:120px;"><b>Swapping</b>:remove processes from memory, strore on disk, bringback to continue execution</div><div style="padding-left:40px;"><b>-Multitasking in Mobile Systems</b></div><div style="padding-left:80px;">IOS: single foreground process controlled via UI</div><div style="padding-left:120px;">multiple background processes ,inmemory running ,not on display,with limits</div><div style="padding-left:120px;">Limits include single,short task,receivng notification of events</div><div style="padding-left:80px;">Android runs foreground and background, fewer limits</div><div style="padding-left:120px;">background uses a service to perform tasks</div><div style="padding-left:120px;">keep running even if background process suspended</div><div style="padding-left:120px;">service has no UI,small memory use</div><div style="padding-left:40px;"><span style="background-color: #ffdebd;"><b>-Context Switch</b></span></div><div style="padding-left:80px;">When cPU switches to another process,the system must <b>save the state</b> of old process</div><div style="padding-left:120px;">and load the<b> saved state</b> for the new process via a<b> context switch </b></div><div style="padding-left:80px;"><b>Context</b> of a process in PCB</div><div style="padding-left:80px;">Context switch time is overhead,system does no useful work while switching</div><div style="padding-left:120px;">more complex PCB -&gt; more longer switch</div><div style="padding-left:80px;">Time dependent on hardware support</div><div style="padding-left:120px;">hardwire provides multiple sets of registers per CPU-&gt;multiple context loads at once</div><div style="padding-left:40px;"><b>-Operations on Process</b></div><div style="padding-left:80px;">creation</div><div style="padding-left:80px;">termination</div><div style="padding-left:80px;"><b>1.Process creation</b></div><div style="padding-left:120px;"><b>Parent</b> process create<b> children</b> processes, forming a <b>tree </b>of processes</div><div style="padding-left:120px;">process identified and managed via process identifier(pid)</div><div style="padding-left:120px;">-Resource sharing options</div><div style="padding-left:160px;">Parent and children chares all resources</div><div style="padding-left:160px;">children share subnet of parents's resources</div><div style="padding-left:160px;">parent and chaild share no resources</div><div style="padding-left:120px;">-Execution options</div><div style="padding-left:160px;">P and C 同步执行</div><div style="padding-left:160px;">P 等待直到C终止</div><div style="padding-left:120px;">Address space possibility</div><div style="padding-left:160px;">child duplicate of parent</div><div style="padding-left:160px;">C has a program load into it</div><div style="padding-left:120px;">In UNIX:</div><div style="padding-left:160px;">fork() systemcall creates new process,创建成功，给子进程返回0，给父进程返回子进程的pid</div><div style="padding-left:200px;">fork复制父进程的数据段，堆和栈，子进程所复制的父进程的变量位于同一个物理地址的不同相对位置，但父子进程共享虚拟地址（线性地址），使用printf打印&amp;variable时发现，尽管父子进程在fork（）后各自修改后的值不同，虚拟地址相同，而bit储存的位置不同。</div><div style="padding-left:160px;">exec() : call after a fork() to replace the proces's memory with a new program</div><img src="CH3 Process Concept_files/A3.png" type="image/png" data-filename="A3.png" width="504.672px"/><div style="padding-left:120px;"><b>2.Process Termination</b></div><div style="padding-left:160px;"><b>exit()</b>:executes last statement and asks OS to delete it</div><div style="padding-left:200px;">retuens status data from chile to parent (<b>wait(</b>))</div><div style="padding-left:200px;">Process; resources are deallocated by OS</div><div style="padding-left:160px;">Parent terminate execution of children using <b>abort()</b></div><div style="padding-left:200px;">reason:</div><div style="padding-left:240px;">child has executed allocated resources</div><div style="padding-left:240px;">task assigned to child is nolonger required</div><div style="padding-left:240px;">parent is exiting, </div><div style="padding-left:160px;">-cascading termination: ALL children are terminated</div><div style="padding-left:200px;">the termination is initialized by OS</div><div style="padding-left:160px;">-parent wait for termination of C by wait（），The call returns status information</div><div style="padding-left:200px;">and the pid of the terminated process</div><div style="padding-left:200px;">pid = wait(&amp;status)</div><div style="padding-left:160px;">-if no parent waiting(did not invoke wait()), process is a<b> zombie</b></div><div style="padding-left:200px;">if parent terminated without wait, process is an<b> orphan</b></div><div style="padding-left:80px;"><b>-Interprogress Communication</b></div><div style="padding-left:120px;">-Progress within a system may<b> be independent or coorpetating</b></div><div style="padding-left:120px;">-reasons for cooperating</div><div style="padding-left:160px;">informationsharing</div><div style="padding-left:160px;">computation speedup</div><div style="padding-left:160px;">mofularity</div><div style="padding-left:160px;">convenience</div><div style="padding-left:120px;">cooperating process need <b>interprocess communication(ipc)</b></div><div style="padding-left:120px;"><b>model of IPC:</b></div><div style="padding-left:160px;"><b>1.shared memory</b></div><div style="padding-left:160px;"><b>2.message passing</b></div><img src="CH3 Process Concept_files/A4.png" type="image/png" data-filename="A4.png" width="448.4230769230769px"/><div><br/></div><div style="padding-left:80px;"><b>-Producer-consumer Problem</b></div><div style="padding-left:80px;"><b>-Shared Memory</b></div><div style="padding-left:120px;">area of memory shared among the processes</div><div style="padding-left:120px;">communication is under control of the<b> users </b>not OS</div><div style="padding-left:80px;"><b>-Message Passing</b></div><div style="padding-left:120px;">messaging system:processed communicate with each other without restoring to shared variables</div><div style="padding-left:120px;">IPC provides two operations:</div><div style="padding-left:160px;">send,recieve</div><div style="padding-left:120px;">messaging size is either fixed or variable</div><div style="padding-left:120px;">if process P and Q wish to communicate, they need to:</div><div style="padding-left:160px;">establish a communication link</div><div style="padding-left:160px;">exchange messages via send/recieve</div><div style="padding-left:120px;"><b>-Direct communication</b></div><div style="padding-left:160px;"><b>send(P,message)</b></div><div style="padding-left:160px;"><b>recieve(Q,message)</b></div><div style="padding-left:160px;">a link associates 2 processes,usually bidirectional</div><div style="padding-left:120px;"><b>-Indirect communication</b></div><div style="padding-left:160px;">messages directed and received from mailboxes(ports)</div><div style="padding-left:160px;">a link associates many processes, bi-directional</div><div style="padding-left:160px;"><b>send(A,message)</b></div><div style="padding-left:160px;"><b>recieve(A,message)</b></div><div style="padding-left:120px;"><br/></div><div style="padding-left:160px;">send and recieve from mailbox A</div><div style="padding-left:160px;">-allow a link to be associated with at most 2 processes</div><div style="padding-left:160px;">-allow only one process at a time toexecute a recieve option</div><div style="padding-left:160px;">-allow system select arbitrarily reciever</div><div style="padding-left:120px;"><b>-Synchronization</b></div><div style="padding-left:160px;">messagepassing two types:</div><div style="padding-left:160px;">1.Blocking, synchronous</div><div style="padding-left:200px;">blocking send    -sender is blocked until the message is recieved</div><div style="padding-left:200px;">blocking recieve    -reciever is blocked until message is available</div><div style="padding-left:160px;">2.Non-blocking asynchronous</div><div style="padding-left:200px;">non blocking send    sender sends the message and continue</div><div style="padding-left:200px;">non  blocking recieve    -reciever recieves 1.A valid mesage or 2. NULL message</div><div style="padding-left:160px;">if both send and recieve bloking, have a rendezvous</div><img src="CH3 Process Concept_files/Image [1].png" type="image/png" data-filename="Image.png" width="513.7777777777777px"/><div style="padding-left:120px;"><b>-Buffering</b></div><div style="padding-left:160px;"><b>queue of messages attacked to link</b></div><div style="padding-left:160px;"><b>实现：</b></div><div style="padding-left:200px;"><b>1.zero capacity -no queued messages</b></div><div style="padding-left:200px;"><b>2.bounded capacity length n messages,sender wait if link full</b></div><div style="padding-left:200px;"><b>3.unbounded capacity :sender never waits</b></div></span>
</div></body></html> 